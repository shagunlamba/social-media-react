{"ast":null,"code":"var _jsxFileName = \"/Users/shagunlamba/Desktop/social-media/client/src/pages/UploadPosts/Upload.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport UserNavbar from '../../components/Navbar/UserNavbar';\nimport classes from './Upload.module.css';\nimport Footer from '../../components/Footer/Footer';\nimport { Form } from 'react-bootstrap';\nimport axios from 'axios';\nimport BASE_URL from '../../config';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Upload = () => {\n  _s();\n\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [image, setImage] = useState([]);\n  const history = useHistory();\n\n  const onSubmitHandler = e => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"file\", image[0]);\n    formData.append(\"upload_preset\", \"w9wt7bfe\");\n    axios.post(\"https://api.cloudinary.com/v1_1/du7o5hpad/image/upload\", formData).then(response => {\n      console.log(response);\n      const fileName = response.data.public_id;\n      const localStr = JSON.parse(localStorage.getItem('user-info'));\n      axios.post(`${BASE_URL}/upload`, {\n        title: title,\n        description: description,\n        image: fileName,\n        author: localStr.username\n      }).then(res => {\n        console.log(\"The response\", res);\n        history.push('/feed');\n      }).catch(err => {\n        console.log(err);\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(UserNavbar, {\n      iconName: \"upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.upload,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.uploadForm,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Create a post!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: onSubmitHandler,\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              className: classes.formLabel,\n              children: \"Title\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              name: \"title\",\n              placeholder: \"Title..\",\n              className: \"shadow-none\",\n              value: title,\n              onChange: e => {\n                setTitle(e.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              className: classes.formLabel,\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              name: \"description\",\n              placeholder: \"Description..\",\n              className: \"shadow-none\",\n              value: description,\n              onChange: e => {\n                setDescription(e.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            onChange: e => {\n              setImage(e.target.files);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: classes[\"square_btn\"],\n              children: \"Create\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Upload, \"WNisCBQSnRX13CMPZELsmUKYv6w=\", false, function () {\n  return [useHistory];\n});\n\n_c = Upload;\nexport default Upload;\n\nvar _c;\n\n$RefreshReg$(_c, \"Upload\");","map":{"version":3,"sources":["/Users/shagunlamba/Desktop/social-media/client/src/pages/UploadPosts/Upload.js"],"names":["React","useState","UserNavbar","classes","Footer","Form","axios","BASE_URL","useHistory","Upload","title","setTitle","description","setDescription","image","setImage","history","onSubmitHandler","e","preventDefault","formData","FormData","append","post","then","response","console","log","fileName","data","public_id","localStr","JSON","parse","localStorage","getItem","author","username","res","push","catch","err","upload","uploadForm","formLabel","target","value","files"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport UserNavbar from '../../components/Navbar/UserNavbar';\nimport classes from './Upload.module.css';\nimport Footer from '../../components/Footer/Footer';\nimport { Form } from 'react-bootstrap';\nimport axios from 'axios';\nimport BASE_URL from '../../config';\nimport { useHistory } from 'react-router-dom';\n\nconst Upload = () => {\n\n    const [title, setTitle] = useState('');\n    const [description, setDescription] = useState('');\n    const [image, setImage] = useState([]);\n    const history = useHistory();\n\n    const onSubmitHandler= (e)=>{\n        e.preventDefault();\n\n        const formData = new FormData();\n        formData.append(\"file\",image[0]);\n        formData.append(\"upload_preset\", \"w9wt7bfe\");\n\n        axios.post(\"https://api.cloudinary.com/v1_1/du7o5hpad/image/upload\", formData)\n        .then((response)=>{\n            console.log(response);\n            const fileName = response.data.public_id;\n            const localStr = JSON.parse(localStorage.getItem('user-info'));\n                axios.post(`${BASE_URL}/upload`,{   \n                    title: title, \n                    description: description, \n                    image: fileName,\n                    author: localStr.username\n                })\n                .then((res)=>{\n                    console.log(\"The response\",res);\n                    history.push('/feed');\n                })\n                .catch((err)=>{\n                    console.log(err);\n                })\n        })\n        .catch((err)=>{\n            console.log(err);\n        })\n    }   \n\n    return (\n        <div>\n            <UserNavbar iconName=\"upload\" />\n            <div className={classes.upload}>\n            <div className={classes.uploadForm}>\n                <h1>Create a post!</h1>\n\n                <Form onSubmit={onSubmitHandler}>\n                    <Form.Group>\n                        <Form.Label \n                        className={classes.formLabel}\n                        >Title</Form.Label>\n                        <Form.Control\n                            type=\"text\"\n                            name=\"title\"\n                            placeholder=\"Title..\"\n                            className=\"shadow-none\"\n                            value={title}\n                            onChange={\n                                (e)=>{\n                                    setTitle(e.target.value);\n                                }\n                            }\n                        />\n                    </Form.Group>\n\n                    <Form.Group>\n                        <Form.Label \n                        className={classes.formLabel}\n                        >Description</Form.Label>\n                        <Form.Control\n                            type=\"text\"\n                            name=\"description\"\n                            placeholder=\"Description..\"\n                            className=\"shadow-none\"\n                            value={description}\n                            onChange={\n                                (e)=>{\n                                    setDescription(e.target.value);\n                                }\n                            }\n                        />\n                    </Form.Group>\n                    \n                    <input \n                        type=\"file\" \n                        onChange={\n                            (e)=>{\n                                setImage(e.target.files);\n                            }\n                        }\n                    />\n\n\n                    <div className=\"text-center\">\n                        <button type=\"submit\" className={classes[\"square_btn\"]}>Create</button>\n                    </div>\n                </Form>\n            </div>\n            </div>\n            <Footer />\n        </div>\n    )\n}\nexport default Upload;"]},"metadata":{},"sourceType":"module"}